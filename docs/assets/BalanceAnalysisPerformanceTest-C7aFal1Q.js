var P=Object.defineProperty;var S=(n,e,t)=>e in n?P(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var r=(n,e,t)=>S(n,typeof e!="symbol"?e+"":e,t);import{B as o,S as c}from"./index-DKrfMrI7.js";class F{constructor(){r(this,"metrics",[]);r(this,"testStartTime",0);r(this,"testName","");r(this,"frameRateMonitor",null)}startTest(e){this.testName=e,this.testStartTime=performance.now(),this.metrics=[],console.log(`üî¨ Performance Test Started: ${e}`)}profileOperation(e,t,a=5){const i=performance.now();try{t()}catch(h){console.error(`‚ùå Error in operation ${e}:`,h)}const s=performance.now()-i,l=s<a,m={operationName:e,executionTime:s,timestamp:i,passed:l,threshold:a};this.metrics.push(m);const p=l?"‚úÖ":"‚ùå",u=l?"PASS":"FAIL";return console.log(`${p} ${e}: ${s.toFixed(3)}ms [${u}] (threshold: ${a}ms)`),m}async profileAsyncOperation(e,t,a=5){const i=performance.now();try{await t()}catch(h){console.error(`‚ùå Error in async operation ${e}:`,h)}const s=performance.now()-i,l=s<a,m={operationName:e,executionTime:s,timestamp:i,passed:l,threshold:a};this.metrics.push(m);const p=l?"‚úÖ":"‚ùå",u=l?"PASS":"FAIL";return console.log(`${p} ${e}: ${s.toFixed(3)}ms [${u}] (threshold: ${a}ms)`),m}startFrameRateMonitoring(){this.frameRateMonitor=new R,this.frameRateMonitor.start()}stopFrameRateMonitoring(){if(!this.frameRateMonitor)return null;const e=this.frameRateMonitor.stop();return this.frameRateMonitor=null,e}endTest(){const e=performance.now(),t=e-this.testStartTime,a=this.metrics.length,i=this.metrics.filter(d=>d.passed).length,f=a-i,s=this.metrics.map(d=>d.executionTime),l=s.length>0?s.reduce((d,y)=>d+y,0)/s.length:0,m=s.length>0?Math.max(...s):0,p=s.length>0?Math.min(...s):0,u=a>0?i/a*100:0,h=this.stopFrameRateMonitoring(),T={testName:this.testName,startTime:this.testStartTime,endTime:e,duration:t,metrics:[...this.metrics],summary:{totalOperations:a,passedOperations:i,failedOperations:f,averageExecutionTime:l,maxExecutionTime:m,minExecutionTime:p,passRate:u},frameRateImpact:h};return this.logReport(T),T}logReport(e){if(console.log(`
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ`),console.log(`üìä Performance Test Report: ${e.testName}`),console.log("‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ"),console.log(`
‚è±Ô∏è  Test Duration: ${e.duration.toFixed(2)}ms`),console.log(`
üìà Summary Statistics:`),console.log(`   Total Operations: ${e.summary.totalOperations}`),console.log(`   ‚úÖ Passed: ${e.summary.passedOperations}`),console.log(`   ‚ùå Failed: ${e.summary.failedOperations}`),console.log(`   Pass Rate: ${e.summary.passRate.toFixed(1)}%`),console.log(`
‚ö° Execution Times:`),console.log(`   Average: ${e.summary.averageExecutionTime.toFixed(3)}ms`),console.log(`   Maximum: ${e.summary.maxExecutionTime.toFixed(3)}ms`),console.log(`   Minimum: ${e.summary.minExecutionTime.toFixed(3)}ms`),e.frameRateImpact){console.log(`
üéÆ Frame Rate Impact:`),console.log(`   Baseline FPS: ${e.frameRateImpact.baselineFPS.toFixed(1)}`),console.log(`   Test FPS: ${e.frameRateImpact.testFPS.toFixed(1)}`),console.log(`   FPS Drop: ${e.frameRateImpact.fpsDropPercent.toFixed(1)}%`);const f=e.frameRateImpact.acceptable?"‚úÖ":"‚ùå",s=e.frameRateImpact.acceptable?"ACCEPTABLE":"UNACCEPTABLE";console.log(`   ${f} Impact: ${s}`)}const t=e.summary.passRate===100;console.log(`
${t?"‚úÖ":"‚ùå"} Overall Result: ${t?"PASSED":"FAILED"}`),console.log(`‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
`)}exportReport(e){return JSON.stringify(e,null,2)}}class R{constructor(){r(this,"baselineFPS",0);r(this,"testFPS",0);r(this,"frameCount",0);r(this,"startTime",0);r(this,"lastFrameTime",0);r(this,"isMonitoring",!1);r(this,"animationFrameId",null)}start(){this.isMonitoring=!0,this.frameCount=0,this.startTime=performance.now(),this.lastFrameTime=this.startTime,this.measureBaseline()}measureBaseline(){const e=performance.now();let t=0;const a=()=>{const i=performance.now();t++,i-e<1e3?requestAnimationFrame(a):(this.baselineFPS=t,console.log(`üìä Baseline FPS: ${this.baselineFPS.toFixed(1)}`),this.startTestMonitoring())};requestAnimationFrame(a)}startTestMonitoring(){this.frameCount=0,this.startTime=performance.now();const e=()=>{this.isMonitoring&&(this.frameCount++,this.animationFrameId=requestAnimationFrame(e))};this.animationFrameId=requestAnimationFrame(e)}stop(){this.isMonitoring=!1,this.animationFrameId!==null&&cancelAnimationFrame(this.animationFrameId);const t=(performance.now()-this.startTime)/1e3;this.testFPS=t>0?this.frameCount/t:0;const a=this.baselineFPS>0?(this.baselineFPS-this.testFPS)/this.baselineFPS*100:0,i=a<5;return{baselineFPS:this.baselineFPS,testFPS:this.testFPS,fpsDropPercent:a,acceptable:i}}}class g{constructor(){r(this,"profiler");this.profiler=new F}runAllTests(){console.log(`üöÄ Starting Balance Analysis Performance Tests...
`),this.testBalanceAnalyzerPerformance(),this.testStatisticalAnalyzerPerformance(),this.testCombinedAnalysisPerformance(),this.testLoadPerformance(),console.log(`‚úÖ All performance tests completed!
`)}testBalanceAnalyzerPerformance(){this.profiler.startTest("BalanceAnalyzer Operations"),this.profiler.profileOperation("canDefendWave",()=>{o.canDefendWave(250,5e3,50,800,5)}),this.profiler.profileOperation("calculateEfficiencyScore",()=>{o.calculateEfficiencyScore(50,150,.85,100,50)}),this.profiler.profileOperation("applyDiminishingReturns",()=>{o.applyDiminishingReturns(100,5,100)}),this.profiler.profileOperation("calculateThreatScore",()=>{o.calculateThreatScore(100,50,10,10,"BASIC")}),this.profiler.profileOperation("calculateEffectiveDPS",()=>{o.calculateEffectiveDPS(50,100,25)}),this.profiler.profileOperation("calculateBreakEvenPoint",()=>{o.calculateBreakEvenPoint(100,50,10,100)}),this.profiler.profileOperation("detectBalanceIssues",()=>{o.detectBalanceIssues({damagePerDollar:12.5,survivalRate:45,overkillPercent:18,economyEfficiency:95})}),this.profiler.profileOperation("getOptimalTowerMix",()=>{const e=[{type:"MachineGun",cost:100,dps:50,range:150},{type:"Sniper",cost:200,dps:100,range:300},{type:"Shotgun",cost:150,dps:75,range:100}];o.getOptimalTowerMix(1e3,e)}),this.profiler.profileOperation("analyzeTowerEfficiency",()=>{o.analyzeTowerEfficiency("MachineGun",100,50,150,.85,25,100,10)}),this.profiler.endTest()}testStatisticalAnalyzerPerformance(){this.profiler.startTest("StatisticalAnalyzer Operations");const e=Array.from({length:100},()=>100+Math.random()*50),t=Array.from({length:20},(a,i)=>[i+1,100+i*10+Math.random()*20]);this.profiler.profileOperation("detectOutliers",()=>{c.detectOutliers(e,2)}),this.profiler.profileOperation("analyzeTrend",()=>{c.analyzeTrend(t)}),this.profiler.profileOperation("predictWaveDifficulty",()=>{c.predictWaveDifficulty(t,[21,22,23,24,25])}),this.profiler.profileOperation("calculateSummary",()=>{c.calculateSummary(e)}),this.profiler.endTest()}testCombinedAnalysisPerformance(){this.profiler.startTest("Combined Analysis (Real-World Scenario)"),this.profiler.profileOperation("Real-Time Analysis",()=>{o.detectBalanceIssues({damagePerDollar:15.5,survivalRate:75,overkillPercent:8,economyEfficiency:120}),o.analyzeTowerEfficiency("MachineGun",150,60,150,.9,30,120,12),o.analyzeTowerEfficiency("Sniper",250,120,300,.95,60,120,12),o.canDefendWave(300,6e3,55,850,8)}),this.profiler.profileOperation("Wave-End Analysis",()=>{const e=Array.from({length:10},(t,a)=>[a+1,100+a*15]);c.analyzeTrend(e),c.predictWaveDifficulty(e,[11,12,13,14,15])}),this.profiler.profileOperation("End-Game Analysis",()=>{const e=Array.from({length:500},()=>50+Math.random()*100);c.detectOutliers(e),c.calculateSummary(e),o.detectBalanceIssues({damagePerDollar:18.2,survivalRate:85,overkillPercent:6.5,economyEfficiency:145})}),this.profiler.endTest()}testLoadPerformance(){this.profiler.startTest("Load Testing (1000 Operations)"),this.profiler.profileOperation("1000 Balance Issue Detections",()=>{for(let e=0;e<1e3;e++)o.detectBalanceIssues({damagePerDollar:10+Math.random()*20,survivalRate:50+Math.random()*50,overkillPercent:Math.random()*30,economyEfficiency:80+Math.random()*60})},50),this.profiler.profileOperation("1000 Efficiency Calculations",()=>{for(let e=0;e<1e3;e++)o.calculateEfficiencyScore(40+Math.random()*60,100+Math.random()*200,.7+Math.random()*.3,80+Math.random()*120,Math.random()*100)},50),this.profiler.endTest()}async testWithFrameRateMonitoring(){console.log(`üéÆ Starting Frame Rate Impact Test...
`),this.profiler.startTest("Frame Rate Impact Test"),this.profiler.startFrameRateMonitoring(),await this.sleep(1e3);const e=Date.now();let t=0;for(;Date.now()-e<3e3;)o.detectBalanceIssues({damagePerDollar:15,survivalRate:75,overkillPercent:10,economyEfficiency:120}),t++,await this.sleep(10);console.log(`üìä Performed ${t} operations during test`),this.profiler.endTest()}sleep(e){return new Promise(t=>setTimeout(t,e))}}function O(){new g().runAllTests()}async function v(){await new g().testWithFrameRateMonitoring()}export{g as BalanceAnalysisPerformanceTest,O as runBalancePerformanceTests,v as runFrameRateTest};
//# sourceMappingURL=BalanceAnalysisPerformanceTest-C7aFal1Q.js.map
